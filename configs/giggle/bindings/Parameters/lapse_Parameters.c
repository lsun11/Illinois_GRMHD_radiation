/*@@
   @file    lapse_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedBSSN.h"
#include "ParameterCRestrictedGRID.h"
#include "ParameterCRestrictedMETHODOFLINES.h"

/* structure containing all private parameters of thorn lapse */
struct
{
  CCTK_REAL opl_lapse_floor;
} PRIVATE_LAPSE_STRUCT;


/* structure containing all restricted parameters of thorn lapse */
struct
{
  CCTK_REAL hyper_a1;
  CCTK_REAL hyper_a2;
  CCTK_REAL hyper_a3;
  const char * slicing_type;
  CCTK_INT f_of_alpha;
  CCTK_INT hyper_Integration_Order;
  CCTK_INT lapse_MaxNumConstrainedVars;
  CCTK_INT lapse_MaxNumEvolvedVars;
  CCTK_INT opl_a0lap;
  CCTK_INT opl_advect_enable;
  CCTK_INT opl_alap;
} RESTRICTED_LAPSE_STRUCT;


int CCTKi_BindingsCreatelapseParameters(void);
int CCTKi_BindingsCreatelapseParameters(void)
{
  CCTKi_ParameterCreate("f_of_alpha",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Function multiplying RHS of 1+log type slicing, dt alpha = -\alpha^2*f(alpha)*K",
                        "0",
                        &(RESTRICTED_LAPSE_STRUCT.f_of_alpha),
                        0,
                        NULL,
                        1,
                        "0:*", "0:f(alpha)=2/alpha, 1:f(alpha)=2");

  CCTKi_ParameterCreate("hyper_Integration_Order",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Integration Order for timestepping",
                        "2",
                        &(RESTRICTED_LAPSE_STRUCT.hyper_Integration_Order),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive");

  CCTKi_ParameterCreate("hyper_a1",
                        "lapse",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "a1 parameter for hyperbolic slicing",
                        "1.0",
                        &(RESTRICTED_LAPSE_STRUCT.hyper_a1),
                        0,
                        NULL,
                        1,
                        "*:*", "Anything");

  CCTKi_ParameterCreate("hyper_a2",
                        "lapse",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "a2 parameter for hyperbolic slicing",
                        "0.0",
                        &(RESTRICTED_LAPSE_STRUCT.hyper_a2),
                        0,
                        NULL,
                        1,
                        "*:*", "Anything");

  CCTKi_ParameterCreate("hyper_a3",
                        "lapse",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "a3 parameter for hyperbolic slicing",
                        "0.0",
                        &(RESTRICTED_LAPSE_STRUCT.hyper_a3),
                        0,
                        NULL,
                        1,
                        "*:*", "Anything");

  CCTKi_ParameterCreate("lapse_MaxNumConstrainedVars",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "The maximum number of constrained variables used by lapse",
                        "1",
                        &(RESTRICTED_LAPSE_STRUCT.lapse_MaxNumConstrainedVars),
                        0,
                        NULL,
                        1,
                        "1:1", "The Analytic-Numerical gridfunction");

  CCTKi_ParameterCreate("lapse_MaxNumEvolvedVars",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "The maximum number of evolved variables used by lapse",
                        "2",
                        &(RESTRICTED_LAPSE_STRUCT.lapse_MaxNumEvolvedVars),
                        0,
                        NULL,
                        1,
                        "2:2", "Just 2: lapse and lapset");

  CCTKi_ParameterCreate("opl_a0lap",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "alpha(t=0)=psi^(-opl_a0lap); negative values -> initial data thorn must set initial lapse! NOTE: negative = OFF",
                        "-1",
                        &(RESTRICTED_LAPSE_STRUCT.opl_a0lap),
                        0,
                        NULL,
                        1,
                        "*:*", "anything");

  CCTKi_ParameterCreate("opl_advect_enable",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "advection enabled for opl slicing : 0 = off, 1 = (mixed 1st/2nd order), 2 = (4th order)",
                        "1",
                        &(RESTRICTED_LAPSE_STRUCT.opl_advect_enable),
                        0,
                        NULL,
                        1,
                        "0:2", "either zero (no upwinding), one (mixed 1st/2nd order), or two (4th order)");

  CCTKi_ParameterCreate("opl_alap",
                        "lapse",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "dt alpha = -2 \alpha K psi^(-opl_alap) + advection..",
                        "0",
                        &(RESTRICTED_LAPSE_STRUCT.opl_alap),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive");

  CCTKi_ParameterCreate("slicing_type",
                        "lapse",
                        "KEYWORD",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Type of slicing to use",
                        "geodesic",
                        &(RESTRICTED_LAPSE_STRUCT.slicing_type),
                        0,
                        NULL,
                        7,
                        "geodesic", "Apply geodesic slicing,setting lapse to 1 initially",
                        "frozen", "Freeze the lapse to its initial value",
                        "harmonic", "Apply harmonic slicing",
                        "parabolic", "Apply parabolic slicing",
                        "hyperbolic", "Apply hyperbolic slicing",
                        "opl", "Apply one plus log slicing",
                        "opl_loglapse", "Apply one plus log slicing, try to evolve log(alpha)");

  CCTKi_ParameterCreate("opl_lapse_floor",
                        "lapse",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Impose floor on 1+log lapse?  If so, set == floor value you want.",
                        "0.0",
                        &(PRIVATE_LAPSE_STRUCT.opl_lapse_floor),
                        0,
                        NULL,
                        1,
                        "*:*", "Anything");

  return 0;
}

int CCTKi_BindingslapseParameterExtensions(void);
int CCTKi_BindingslapseParameterExtensions(void)
{
  CCTKi_ParameterAccumulatorBase("lapse",
                          "lapse_MaxNumConstrainedVars",
                          "MethodofLines",
                          "MoL_Num_Constrained_Vars");

  CCTKi_ParameterAccumulatorBase("lapse",
                          "lapse_MaxNumEvolvedVars",
                          "MethodofLines",
                          "MoL_Num_Evolved_Vars");

  return 0;
}

