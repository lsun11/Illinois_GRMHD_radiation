/*@@
   @file    LoopControl_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"

/* structure containing all private parameters of thorn LoopControl */
struct
{
  CCTK_REAL delayed_overhead_threshold;
  CCTK_REAL immediate_overhead_threshold;
  CCTK_REAL maximum_setup_overhead;
  CCTK_REAL probability_random_jump;
  CCTK_REAL probability_small_jump;
  CCTK_REAL siman_T_initial;
  CCTK_REAL siman_T_min;
  CCTK_REAL siman_k;
  CCTK_REAL siman_mu_T;
  CCTK_REAL siman_probability_change_topology;
  CCTK_REAL siman_step_size;
  CCTK_INT cycle_j_tilings;
  CCTK_INT debug;
  CCTK_INT ignore_initial_overhead;
  CCTK_INT lc_inpoints;
  CCTK_INT lc_inthreads;
  CCTK_INT lc_jnpoints;
  CCTK_INT lc_jnthreads;
  CCTK_INT lc_knpoints;
  CCTK_INT lc_knthreads;
  CCTK_INT legacy_init;
  CCTK_INT max_jump_attempts;
  CCTK_INT nsteps;
  CCTK_INT nx;
  CCTK_INT ny;
  CCTK_INT nz;
  CCTK_INT overhead_threshold_delay;
  CCTK_INT printstats;
  CCTK_INT run_demo;
  CCTK_INT siman_iters_fixed_T;
  CCTK_INT small_jump_distance;
  CCTK_INT use_random_restart_hill_climbing;
  CCTK_INT use_simulated_annealing;
  CCTK_INT verbose;
} PRIVATE_LOOPCONTROL_STRUCT;


/* structure containing all restricted parameters of thorn LoopControl */
struct
{
  int dummy_parameter;
} RESTRICTED_LOOPCONTROL_STRUCT;


int CCTKi_BindingsCreateLoopControlParameters(void);
int CCTKi_BindingsCreateLoopControlParameters(void)
{
  CCTKi_ParameterCreate("cycle_j_tilings",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Cycle through all available tilings in the j-direction",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.cycle_j_tilings),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("debug",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output debug information",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.debug),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("delayed_overhead_threshold",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "The maximum overhead (ratio of current to best known time) allowed during an excursion",
                        "0.1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.delayed_overhead_threshold),
                        0,
                        NULL,
                        1,
                        "0.0:*", "");

  CCTKi_ParameterCreate("ignore_initial_overhead",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Ignore the overhead from the initial setup",
                        "yes",
                        &(PRIVATE_LOOPCONTROL_STRUCT.ignore_initial_overhead),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("immediate_overhead_threshold",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "The maximum overhead (ratio of current to best known time) allowed during an excursion",
                        "1.0",
                        &(PRIVATE_LOOPCONTROL_STRUCT.immediate_overhead_threshold),
                        0,
                        NULL,
                        1,
                        "0.0:*", "");

  CCTKi_ParameterCreate("lc_inpoints",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of grid points in the i-direction",
                        "-1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.lc_inpoints),
                        0,
                        NULL,
                        2,
                        "-1", "choose automatically",
                        "1:*", "user-specified value");

  CCTKi_ParameterCreate("lc_inthreads",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of threads in the i-direction",
                        "-1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.lc_inthreads),
                        0,
                        NULL,
                        2,
                        "-1", "choose automatically",
                        "1:*", "user-specified value");

  CCTKi_ParameterCreate("lc_jnpoints",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of grid points in the j-direction",
                        "-1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.lc_jnpoints),
                        0,
                        NULL,
                        2,
                        "-1", "choose automatically",
                        "1:*", "user-specified value");

  CCTKi_ParameterCreate("lc_jnthreads",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of threads in the j-direction",
                        "-1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.lc_jnthreads),
                        0,
                        NULL,
                        2,
                        "-1", "choose automatically",
                        "1:*", "user-specified value");

  CCTKi_ParameterCreate("lc_knpoints",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of grid points in the k-direction",
                        "-1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.lc_knpoints),
                        0,
                        NULL,
                        2,
                        "-1", "choose automatically",
                        "1:*", "user-specified value");

  CCTKi_ParameterCreate("lc_knthreads",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of threads in the k-direction",
                        "-1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.lc_knthreads),
                        0,
                        NULL,
                        2,
                        "-1", "choose automatically",
                        "1:*", "user-specified value");

  CCTKi_ParameterCreate("legacy_init",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Initialise with legacy configuration (usually slower)",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.legacy_init),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("max_jump_attempts",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Maximum number of attempts to find a random unknown location",
                        "10",
                        &(PRIVATE_LOOPCONTROL_STRUCT.max_jump_attempts),
                        0,
                        NULL,
                        1,
                        "0:*", "");

  CCTKi_ParameterCreate("maximum_setup_overhead",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Maximum allowable administrative overhead",
                        "0.01",
                        &(PRIVATE_LOOPCONTROL_STRUCT.maximum_setup_overhead),
                        0,
                        NULL,
                        1,
                        "0.0:*", "");

  CCTKi_ParameterCreate("nsteps",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of time steps (for the embedded wavetoy example)",
                        "100",
                        &(PRIVATE_LOOPCONTROL_STRUCT.nsteps),
                        0,
                        NULL,
                        1,
                        "1:*", "a positive integer");

  CCTKi_ParameterCreate("nx",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of grid points in X dimension (for the embedded wavetoy example)",
                        "100",
                        &(PRIVATE_LOOPCONTROL_STRUCT.nx),
                        0,
                        NULL,
                        1,
                        "1:*", "a positive integer");

  CCTKi_ParameterCreate("ny",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of grid points in Y dimension (for the embedded wavetoy example)",
                        "100",
                        &(PRIVATE_LOOPCONTROL_STRUCT.ny),
                        0,
                        NULL,
                        1,
                        "1:*", "a positive integer");

  CCTKi_ParameterCreate("nz",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of grid points in Z dimension (for the embedded wavetoy example)",
                        "100",
                        &(PRIVATE_LOOPCONTROL_STRUCT.nz),
                        0,
                        NULL,
                        1,
                        "1:*", "a positive integer");

  CCTKi_ParameterCreate("overhead_threshold_delay",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Number of steps in an excursion before the delayed overhead criterion is applied",
                        "20",
                        &(PRIVATE_LOOPCONTROL_STRUCT.overhead_threshold_delay),
                        0,
                        NULL,
                        1,
                        "0:*", "");

  CCTKi_ParameterCreate("printstats",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Output timing statistics at shutdown",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.printstats),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("probability_random_jump",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Probability for a random jump once a local minimum has been reached",
                        "0.01",
                        &(PRIVATE_LOOPCONTROL_STRUCT.probability_random_jump),
                        0,
                        NULL,
                        1,
                        "0.0:1.0", "");

  CCTKi_ParameterCreate("probability_small_jump",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Probability for a small jump once a local minimum has been reached",
                        "0.1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.probability_small_jump),
                        0,
                        NULL,
                        1,
                        "0.0:1.0", "");

  CCTKi_ParameterCreate("run_demo",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Run the embedded wavetoy as a LoopControl demo application",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.run_demo),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("siman_T_initial",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "initial variability",
                        "1.0",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_T_initial),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("siman_T_min",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "stopping criterion",
                        "0.01",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_T_min),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("siman_iters_fixed_T",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "",
                        "1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_iters_fixed_T),
                        0,
                        NULL,
                        1,
                        "1:*", "");

  CCTKi_ParameterCreate("siman_k",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "energy scale",
                        "1.0e-9",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_k),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("siman_mu_T",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "speed",
                        "1.005",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_mu_T),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("siman_probability_change_topology",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "",
                        "0.1",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_probability_change_topology),
                        0,
                        NULL,
                        1,
                        "0:1", "");

  CCTKi_ParameterCreate("siman_step_size",
                        "LoopControl",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "",
                        "3.0",
                        &(PRIVATE_LOOPCONTROL_STRUCT.siman_step_size),
                        0,
                        NULL,
                        1,
                        "(1.0:*", "");

  CCTKi_ParameterCreate("small_jump_distance",
                        "LoopControl",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Maximum distance for a small jump",
                        "3",
                        &(PRIVATE_LOOPCONTROL_STRUCT.small_jump_distance),
                        0,
                        NULL,
                        1,
                        "0:*", "");

  CCTKi_ParameterCreate("use_random_restart_hill_climbing",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "http://en.wikipedia.org/wiki/Hill_climbing http://en.wikipedia.org/wiki/Tabu_search",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.use_random_restart_hill_climbing),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("use_simulated_annealing",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Find a good loop configuration through simulated annealing",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.use_simulated_annealing),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("verbose",
                        "LoopControl",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Verbosity",
                        "no",
                        &(PRIVATE_LOOPCONTROL_STRUCT.verbose),
                        0,
                        NULL,
                        0);

  return 0;
}

int CCTKi_BindingsLoopControlParameterExtensions(void);
int CCTKi_BindingsLoopControlParameterExtensions(void)
{
  return 0;
}
