/*@@
   @file    CarpetLib_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedIO.h"

/* structure containing all private parameters of thorn CarpetLib */
struct
{
  const char * memstat_file;
  const char * timestat_file;
  CCTK_INT barrier_between_stages;
  CCTK_INT barriers;
  CCTK_INT check_bboxes;
  CCTK_INT combine_recompose;
  CCTK_INT combine_sends;
  CCTK_INT commstate_verbose;
  CCTK_INT interleave_communications;
  CCTK_INT max_allowed_memory_MB;
  CCTK_INT output_bboxes;
  CCTK_INT poison_new_memory;
  CCTK_INT poison_value;
  CCTK_INT print_memstats_every;
  CCTK_INT print_timestats_every;
  CCTK_INT reduce_mpi_waitall;
  CCTK_INT use_mpi_send;
  CCTK_INT use_mpi_ssend;
  CCTK_INT vary_tags;
  CCTK_INT verbose;
} PRIVATE_CARPETLIB_STRUCT;


/* structure containing all restricted parameters of thorn CarpetLib */
struct
{
  int dummy_parameter;
} RESTRICTED_CARPETLIB_STRUCT;


int CCTKi_BindingsCreateCarpetLibParameters(void);
int CCTKi_BindingsCreateCarpetLibParameters(void)
{
  CCTKi_ParameterCreate("barrier_between_stages",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Add a barrier between the communication stages (slows down, but may make timing numbers easier to interpret)",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.barrier_between_stages),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("barriers",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Insert barriers at strategic places for debugging purposes (slows down execution)",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.barriers),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("check_bboxes",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Check bounding box information for self-consistency",
                        "yes",
                        &(PRIVATE_CARPETLIB_STRUCT.check_bboxes),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("combine_recompose",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Recompose all grid functions of one refinement levels at once",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.combine_recompose),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("combine_sends",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Send data together and in order of processor ranks",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.combine_sends),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("commstate_verbose",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Print debug info from the commstate class",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.commstate_verbose),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("interleave_communications",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Try to interleave communications with each other; each processor begins to communicate with its 'right neighbour' in rank, instead of with the root processor",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.interleave_communications),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("max_allowed_memory_MB",
                        "CarpetLib",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Maximum allowed amount of memory per process (in Megabytes)",
                        "0",
                        &(PRIVATE_CARPETLIB_STRUCT.max_allowed_memory_MB),
                        0,
                        NULL,
                        3,
                        "-1", "no maximum",
                        "0", "no maximum",
                        "1:*", "abort if more memory is used");

  CCTKi_ParameterCreate("memstat_file",
                        "CarpetLib",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "File name in which memstat output is collected (because stdout from the root node may not be enough)",
                        "carpetlib-memory-statistics",
                        &(PRIVATE_CARPETLIB_STRUCT.memstat_file),
                        0,
                        NULL,
                        2,
                        "^$", "empty filename: no file output",
                        "^.+$", "file name");

  CCTKi_ParameterCreate("output_bboxes",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output bounding box information to the screen",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.output_bboxes),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("poison_new_memory",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Try to catch uninitialised data by setting newly allocated memory to values that will catch your attention",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.poison_new_memory),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("poison_value",
                        "CarpetLib",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Integer value (0..255) used to poison new timelevels (with memset)",
                        "255",
                        &(PRIVATE_CARPETLIB_STRUCT.poison_value),
                        0,
                        NULL,
                        1,
                        "0:255", "Must fit into a byte.  Use 0 for zero, 255 for nan, and e.g. 113 for a large value.");

  CCTKi_ParameterCreate("print_memstats_every",
                        "CarpetLib",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Report periodically how much memory is used per process",
                        "0",
                        &(PRIVATE_CARPETLIB_STRUCT.print_memstats_every),
                        0,
                        NULL,
                        3,
                        "-1", "don't report",
                        "0", "don't report",
                        "1:*", "report every so many iterations");

  CCTKi_ParameterCreate("print_timestats_every",
                        "CarpetLib",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Print timing statistics periodically",
                        "0",
                        &(PRIVATE_CARPETLIB_STRUCT.print_timestats_every),
                        0,
                        NULL,
                        3,
                        "-1", "don't report",
                        "0", "don't report",
                        "1:*", "report every so many iterations");

  CCTKi_ParameterCreate("reduce_mpi_waitall",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Call MPI_Waitall only for requests that are not null",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.reduce_mpi_waitall),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("timestat_file",
                        "CarpetLib",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "File name in which timestat output is collected (because stdout from the root node may not be enough)",
                        "carpetlib-timing-statistics",
                        &(PRIVATE_CARPETLIB_STRUCT.timestat_file),
                        0,
                        NULL,
                        2,
                        "^$", "empty filename: no file output",
                        "^.+$", "file name");

  CCTKi_ParameterCreate("use_mpi_send",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Use MPI_Send instead of MPI_Isend",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.use_mpi_send),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("use_mpi_ssend",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Use MPI_Ssend instead of MPI_Isend",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.use_mpi_ssend),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("vary_tags",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Use different tags for each communication",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.vary_tags),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("verbose",
                        "CarpetLib",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Print info to the screen",
                        "no",
                        &(PRIVATE_CARPETLIB_STRUCT.verbose),
                        0,
                        NULL,
                        0);

  return 0;
}

int CCTKi_BindingsCarpetLibParameterExtensions(void);
int CCTKi_BindingsCarpetLibParameterExtensions(void)
{
  return 0;
}
