/*@@
   @file    bssn_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCGlobal.h"
#include "ParameterCRestrictedDIAGNOSTICS_MHD.h"
#include "ParameterCRestrictedDIAGNOSTICS_VACUUM.h"
#include "ParameterCRestrictedEXCISION.h"
#include "ParameterCRestrictedGRID.h"
#include "ParameterCRestrictedIO.h"
#include "ParameterCRestrictedLAPSE.h"
#include "ParameterCRestrictedMETHODOFLINES.h"
#include "ParameterCRestrictedSHIFT.h"

/* structure containing all private parameters of thorn bssn */
struct
{
  CCTK_REAL cH1;
  CCTK_REAL chi_exponent;
  CCTK_REAL phi_cap;
  CCTK_INT Gammai_enforcement_type;
  CCTK_INT bc_type;
  CCTK_INT chi_evolution_enable;
  CCTK_INT chi_floor_enable;
  CCTK_INT enable_second_order_inside_ah;
  CCTK_INT gambound;
  CCTK_INT phi_cap_enable;
} PRIVATE_BSSN_STRUCT;


/* structure containing all restricted parameters of thorn bssn */
struct
{
  CCTK_REAL Xcenter;
  CCTK_REAL Ycenter;
  CCTK_REAL Zcenter;
  CCTK_REAL ah_excision_fac;
  CCTK_REAL binary_orb_freq;
  CCTK_REAL radmax_rot_interp_1;
  CCTK_REAL radmax_rot_interp_2;
  CCTK_REAL radmax_rot_interp_3;
  CCTK_REAL radmin_rot_interp_1;
  CCTK_REAL radmin_rot_interp_2;
  CCTK_REAL radmin_rot_interp_3;
  CCTK_REAL rah1_initial;
  CCTK_REAL rah2_initial;
  CCTK_REAL rotation_phase;
  CCTK_REAL xbh1_initial;
  CCTK_REAL xbh2_initial;
  CCTK_REAL y_offset;
  CCTK_INT BSSN_MaxNumConstrainedVars;
  CCTK_INT BSSN_MaxNumEvolvedVars;
  CCTK_INT Nlograd_rot_interp;
  CCTK_INT Nphi_rot_interp;
  CCTK_INT Ntheta_rot_interp;
  CCTK_INT bssn_enable_shift_upwind;
  CCTK_INT enable_lower_order_at_boundaries;
  CCTK_INT use_trans_fish_phys_new;
  CCTK_INT zero_out_matter_source_terms;
} RESTRICTED_BSSN_STRUCT;


int CCTKi_BindingsCreatebssnParameters(void);
int CCTKi_BindingsCreatebssnParameters(void)
{
  CCTKi_ParameterCreate("Symmetry",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_NEVER,
                        "Symmetry",
                        "1",
                        &(GLOBAL_PARAMETER_STRUCT.Symmetry),
                        0,
                        NULL,
                        1,
                        "0:4", "From 0 to 4");

  CCTKi_ParameterCreate("bssn_enable",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_ALWAYS,
                        "Allows one to disable BSSN only, allowing lapse and shift to evolve",
                        "1",
                        &(GLOBAL_PARAMETER_STRUCT.bssn_enable),
                        0,
                        NULL,
                        1,
                        "0:1", "Either 0 (no) or 1 (yes)");

  CCTKi_ParameterCreate("cowling_enable",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_ALWAYS,
                        "Enable Cowling (turn off BSSN and lapse+shift evolution)",
                        "0",
                        &(GLOBAL_PARAMETER_STRUCT.cowling_enable),
                        0,
                        NULL,
                        1,
                        "0:1", "Either 0 (no) or 1 (yes)");

  CCTKi_ParameterCreate("iter_count",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_NEVER,
                        "iteration count: keeps track of which MoL ministep we are currently on",
                        "0",
                        &(GLOBAL_PARAMETER_STRUCT.iter_count),
                        0,
                        NULL,
                        1,
                        "0:100", "From 0 to 100 (for safety)");

  CCTKi_ParameterCreate("number_of_mol_ministeps",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_NEVER,
                        "You MUST set this parameter to the number of MoL ministeps for given time integration order",
                        "-1",
                        &(GLOBAL_PARAMETER_STRUCT.number_of_mol_ministeps),
                        0,
                        NULL,
                        1,
                        "-1:100", "If you don't set this parameter, it defaults to -1, prompting checkparams to give an error message.");

  CCTKi_ParameterCreate("rot_metric",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_ALWAYS,
                        "Assume helical Killing vector and rotate metric.  Used for BHBH.  You need to set ROTATING METRIC PARAMETERS below.",
                        "0",
                        &(GLOBAL_PARAMETER_STRUCT.rot_metric),
                        0,
                        NULL,
                        1,
                        "0:1", "Either 0 (no) or 1 (yes)");

  CCTKi_ParameterCreate("trA_detg_enforce",
                        "bssn",
                        "INT",
                        "GLOBAL",
                        CCTK_STEERABLE_NEVER,
                        "0 == off, 1 == old technique (call on edppdet, epdde2, and epdtra (never epdtr2)); 2 == new technique (better)",
                        "1",
                        &(GLOBAL_PARAMETER_STRUCT.trA_detg_enforce),
                        0,
                        NULL,
                        1,
                        "0:2", "Either zero (off), one (old Hwei-Jang technique), or two (new technique)");

  CCTKi_ParameterCreate("BSSN_MaxNumConstrainedVars",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "The maximum number of constrained variables used by BSSN",
                        "1",
                        &(RESTRICTED_BSSN_STRUCT.BSSN_MaxNumConstrainedVars),
                        0,
                        NULL,
                        1,
                        "1:1", "The Analytic-Numerical gridfunction");

  CCTKi_ParameterCreate("BSSN_MaxNumEvolvedVars",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "The maximum number of evolved variables used by BSSN",
                        "18",
                        &(RESTRICTED_BSSN_STRUCT.BSSN_MaxNumEvolvedVars),
                        0,
                        NULL,
                        1,
                        "18:18", "18 evolved BSSN variables: Gamma^i, phi, chi (optional), trK, g_{ij}, and A_{ij}");

  CCTKi_ParameterCreate("Nlograd_rot_interp",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "number of points along lograd in interpolation grid.  Used when rotating metric instead of evolving.",
                        "20",
                        &(RESTRICTED_BSSN_STRUCT.Nlograd_rot_interp),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number");

  CCTKi_ParameterCreate("Nphi_rot_interp",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "number of points along phi in interpolation grid.  Used when rotating metric instead of evolving.",
                        "20",
                        &(RESTRICTED_BSSN_STRUCT.Nphi_rot_interp),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number");

  CCTKi_ParameterCreate("Ntheta_rot_interp",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "number of points along theta in interpolation grid.  Used when rotating metric instead of evolving.",
                        "20",
                        &(RESTRICTED_BSSN_STRUCT.Ntheta_rot_interp),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number");

  CCTKi_ParameterCreate("Xcenter",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "X coordinate of the center of mass",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.Xcenter),
                        0,
                        NULL,
                        1,
                        ":", "No restriction");

  CCTKi_ParameterCreate("Ycenter",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Y coordinate of the center of mass",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.Ycenter),
                        0,
                        NULL,
                        1,
                        ":", "No restriction");

  CCTKi_ParameterCreate("Zcenter",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Z coordinate of the center of mass",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.Zcenter),
                        0,
                        NULL,
                        1,
                        ":", "No restriction");

  CCTKi_ParameterCreate("ah_excision_fac",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "fraction of ah which is excised in cp initial data",
                        "0.89",
                        &(RESTRICTED_BSSN_STRUCT.ah_excision_fac),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive real" );

  CCTKi_ParameterCreate("binary_orb_freq",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "what is the orbital frequency of the binary?",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.binary_orb_freq),
                        0,
                        NULL,
                        1,
                        "0:*", "any positive number" );

  CCTKi_ParameterCreate("bssn_enable_shift_upwind",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "enable shift upwinding?  (zero == no and one == yes)",
                        "0",
                        &(RESTRICTED_BSSN_STRUCT.bssn_enable_shift_upwind),
                        0,
                        NULL,
                        1,
                        "0:2", "either zero (no upwinding), one (mixed 1st/2nd order), or two (4th order)");

  CCTKi_ParameterCreate("enable_lower_order_at_boundaries",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Drop to lower order at boundaries?  Will fill in all zones except the outermost gridpoint on all levels, if finite differencing set to 4th order!",
                        "0",
                        &(RESTRICTED_BSSN_STRUCT.enable_lower_order_at_boundaries),
                        0,
                        NULL,
                        1,
                        "0:1", "Either 0 (no) or 1 (yes)");

  CCTKi_ParameterCreate("radmax_rot_interp_1",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "maximum radius in first interpolation grid.",
                        "100.0",
                        &(RESTRICTED_BSSN_STRUCT.radmax_rot_interp_1),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number");

  CCTKi_ParameterCreate("radmax_rot_interp_2",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "maximum radius in second interpolation grid.",
                        "100.0",
                        &(RESTRICTED_BSSN_STRUCT.radmax_rot_interp_2),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number" );

  CCTKi_ParameterCreate("radmax_rot_interp_3",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "maximum radius in third interpolation grid.",
                        "100.0",
                        &(RESTRICTED_BSSN_STRUCT.radmax_rot_interp_3),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number" );

  CCTKi_ParameterCreate("radmin_rot_interp_1",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "minimum radius in first interpolation grid.",
                        "0.01",
                        &(RESTRICTED_BSSN_STRUCT.radmin_rot_interp_1),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number");

  CCTKi_ParameterCreate("radmin_rot_interp_2",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "minimum radius in second interpolation grid.",
                        "0.01",
                        &(RESTRICTED_BSSN_STRUCT.radmin_rot_interp_2),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number" );

  CCTKi_ParameterCreate("radmin_rot_interp_3",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "minimum radius in third interpolation grid.",
                        "0.01",
                        &(RESTRICTED_BSSN_STRUCT.radmin_rot_interp_3),
                        0,
                        NULL,
                        1,
                        "0:*", "Any positive number" );

  CCTKi_ParameterCreate("rah1_initial",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "initial horizon radius of BH1",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.rah1_initial),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive");

  CCTKi_ParameterCreate("rah2_initial",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "initial horizon radius of BH2",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.rah2_initial),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive");

  CCTKi_ParameterCreate("rotation_phase",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "you can add a phase if you like",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.rotation_phase),
                        0,
                        NULL,
                        1,
                        "0:*", "any positive number");

  CCTKi_ParameterCreate("use_trans_fish_phys_new",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Use new, optimized fisheye<->physical transformation in update_boundary AND shift outer boundary BC's?",
                        "0",
                        &(RESTRICTED_BSSN_STRUCT.use_trans_fish_phys_new),
                        0,
                        NULL,
                        1,
                        "0:1", "Either 0 (no) or 1 (yes)");

  CCTKi_ParameterCreate("xbh1_initial",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "initial x coordinate of bh1",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.xbh1_initial),
                        0,
                        NULL,
                        1,
                        "*:*", "any real");

  CCTKi_ParameterCreate("xbh2_initial",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "initial x coordinate of bh2",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.xbh2_initial),
                        0,
                        NULL,
                        1,
                        "*:*", "any real");

  CCTKi_ParameterCreate("y_offset",
                        "bssn",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "id will by shifted by this amount in y direction",
                        "0.0",
                        &(RESTRICTED_BSSN_STRUCT.y_offset),
                        0,
                        NULL,
                        1,
                        "*:*", "any real");

  CCTKi_ParameterCreate("zero_out_matter_source_terms",
                        "bssn",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "After Carpet moves the grid, matter source terms in vacuum simulations (e.g., BHBH) are not set on entire grid, causing memory errors which lead to crashes.  Definitiely enable this (=1) if doing vacuum BHBH+AMR evolutions",
                        "0",
                        &(RESTRICTED_BSSN_STRUCT.zero_out_matter_source_terms),
                        0,
                        NULL,
                        1,
                        "0:1", "0=no, 1=yes");

  CCTKi_ParameterCreate("Gammai_enforcement_type",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Method used ot enforce \tilde{\Gamma}^i = - \tilde{\gamma}^{ij}_{,j}",
                        "2",
                        &(PRIVATE_BSSN_STRUCT.Gammai_enforcement_type),
                        0,
                        NULL,
                        1,
                        "0:3", "0=disabled, 1=arXiv:gr-qc/0401076 (Duez, Shapiro, Yo) method, 2=arXiv:gr-qc/0701123 (Marronetti et al.) <- this one seems to be best for reducing eccentricity in compact binaries, when coupled with puncture gauge conditions");

  CCTKi_ParameterCreate("bc_type",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Boundary Condition Type: WAVELIKE = 0, FALLOFF = 1, QE = 2, EXTRAP = 3, COPY = 4, QUAD = 5, EXTRAPR = 6, MoR = 7",
                        "0",
                        &(PRIVATE_BSSN_STRUCT.bc_type),
                        0,
                        NULL,
                        1,
                        "0:7", "Between zero and 7");

  CCTKi_ParameterCreate("cH1",
                        "bssn",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "cH1 parameter for using ham. constraint to correct phi_rhs.  See Eq. 19 in Duez et al. Phys.Rev. D67 (2003) 024004",
                        "0.04",
                        &(PRIVATE_BSSN_STRUCT.cH1),
                        0,
                        NULL,
                        1,
                        "0:*", "Anything positive");

  CCTKi_ParameterCreate("chi_evolution_enable",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Evolve chi instead of phi?  WARNING: BETA VERSION.",
                        "0",
                        &(PRIVATE_BSSN_STRUCT.chi_evolution_enable),
                        0,
                        NULL,
                        1,
                        "0:1", "0=no, 1=yes");

  CCTKi_ParameterCreate("chi_exponent",
                        "bssn",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "chi = exp(chi_exponent * phi).",
                        "-1.0",
                        &(PRIVATE_BSSN_STRUCT.chi_exponent),
                        0,
                        NULL,
                        1,
                        "*:0", "Anything negative.  You'll probably get instabilities if you choose a positive number.");

  CCTKi_ParameterCreate("chi_floor_enable",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Artificially impose floor on chi?  If enabled, value will be based on phi_cap! (see above)",
                        "1",
                        &(PRIVATE_BSSN_STRUCT.chi_floor_enable),
                        0,
                        NULL,
                        1,
                        "0:1", "0=no, 1=yes");

  CCTKi_ParameterCreate("enable_second_order_inside_ah",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Enable 2nd order differencing inside AH (assumes puncture is at origin, coordinate radius >0.25)",
                        "0",
                        &(PRIVATE_BSSN_STRUCT.enable_second_order_inside_ah),
                        0,
                        NULL,
                        1,
                        "0:1", "0=off 1=on");

  CCTKi_ParameterCreate("gambound",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Falloff power law index for \tilde{Gamma}",
                        "0",
                        &(PRIVATE_BSSN_STRUCT.gambound),
                        0,
                        NULL,
                        1,
                        "0:2", "Between zero and 2");

  CCTKi_ParameterCreate("phi_cap",
                        "bssn",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Value for phi cap (ceiling)",
                        "4.0",
                        &(PRIVATE_BSSN_STRUCT.phi_cap),
                        0,
                        NULL,
                        1,
                        "0:*", "Anything positive");

  CCTKi_ParameterCreate("phi_cap_enable",
                        "bssn",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Should I set a cap (ceiling) on phi?  Also sets a corresponding cap on psi!",
                        "0",
                        &(PRIVATE_BSSN_STRUCT.phi_cap_enable),
                        0,
                        NULL,
                        1,
                        "0:1", "Either 0 (no) or 1 (yes)");

  return 0;
}

int CCTKi_BindingsbssnParameterExtensions(void);
int CCTKi_BindingsbssnParameterExtensions(void)
{
  CCTKi_ParameterAccumulatorBase("bssn",
                          "BSSN_MaxNumConstrainedVars",
                          "MethodofLines",
                          "MoL_Num_Constrained_Vars");

  CCTKi_ParameterAccumulatorBase("bssn",
                          "BSSN_MaxNumEvolvedVars",
                          "MethodofLines",
                          "MoL_Num_Evolved_Vars");

  return 0;
}
